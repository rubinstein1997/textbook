<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.wxc.book.mapper.ApplyMapper">

    <!--<insert id="addApply" useGeneratedKeys="true" keyProperty="apply_id">-->
      <!--INSERT INTO apply (user_id,status,time)-->
                       <!--VALUES-->
                       <!--(#{user_id},#{status},#{timestamp});</insert>-->

    <resultMap id="ApplyResultMap" type="edu.wxc.book.domain.Apply">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Jun 26 19:15:58 CST 2018.
        -->
        <id column="apply_id" jdbcType="INTEGER" property="applyId" />
        <result column="user_id" jdbcType="INTEGER" property="userId" />
        <result column="status" jdbcType="INTEGER" property="status" />
        <result column="message" jdbcType="VARCHAR" property="message" />
        <result column="time" jdbcType="TIMESTAMP" property="time" />
    </resultMap>

    <insert id="addApply" parameterType="edu.wxc.book.domain.Apply" useGeneratedKeys="true" keyProperty="applyId">
      INSERT INTO apply (user_id,status,time)
                       VALUES
                       (#{userId},#{status},#{time});</insert>
    <select id="selectByUserId" parameterType="java.lang.Integer" resultMap="ApplyResultMap">
      select
        apply_id,
        user_id,
        status,
        message,
        time
      from apply
      where user_id = #{userId}
      order by apply_id DESC
    </select>
</mapper>
